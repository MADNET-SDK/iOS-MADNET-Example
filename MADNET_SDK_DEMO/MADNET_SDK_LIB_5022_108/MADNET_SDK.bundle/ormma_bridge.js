 (function(){var ormmaview=window.ormmaview={};var expandProperties={useBackground:false,backgroundColor:"#ffffff",backgroundOpacity:0,lockOrientation:false,useCustomClose:false,width:0,height:0,isModal:true};var listeners={};var nativeCallQueue=[];var nativeCallInFlight=false;var timer;var totalTime;ormmaview.fireAssetReadyEvent=function(e,t){var n=listeners["assetReady"];if(n!=null){for(var r=0;r<n.length;r++){n[r](e,t)}}return"OK"};ormmaview.fireAssetRemovedEvent=function(e){var t=listeners["assetRemoved"];if(t!=null){for(var n=0;n<t.length;n++){t[n](e)}}return"OK"};ormmaview.fireAssetRetiredEvent=function(e){var t=listeners["assetRetired"];if(t!=null){for(var n=0;n<t.length;n++){t[n](e)}}return"OK"};ormmaview.fireChangeEvent=function(e){var t=listeners["change"];if(t!=null){for(var n=0;n<t.length;n++){t[n](e)}}return"OK"};ormmaview.fireErrorEvent=function(e,t){var n=listeners["error"];if(n!=null){for(var r=0;r<n.length;r++){n[r](e,t)}}this.executeNativeCall("errorhandler","message",e,"action",t);return"OK"};ormmaview.onError=function(e,t){this.executeNativeCall("errorhandler","message",e,"action",t)};ormmaview.fireShakeEvent=function(){var e=listeners["shake"];if(e!=null){for(var t=0;t<e.length;t++){e[t]()}}return"OK"};ormmaview.nativeCallComplete=function(e){if(nativeCallQueue.length==0){nativeCallInFlight=false;return}var t=nativeCallQueue.pop();window.location=t;return"OK"};ormmaview.showAlert=function(e){alert(e)};ormmaview.zeroPad=function(e){var t="";if(e<10){t+="0"}t+=e;return t};ormmaview.executeNativeCall=function(e){var t="ormma://"+e;var n;var r=true;for(var i=1;i<arguments.length;i+=2){n=arguments[i+1];if(n==null){continue}if(r){t+="?";r=false}else{t+="&"}t+=arguments[i]+"="+escape(n)}if(nativeCallInFlight){nativeCallQueue.push(t)}else{nativeCallInFlight=true;window.location=t}};ormmaview.activate=function(e){this.executeNativeCall("service","name",e,"enabled","Y")};ormmaview.addEventListener=function(e,t){var n=listeners[e];if(n==null){listeners[e]=[];n=listeners[e]}for(var r in n){if(t==r){return}}n.push(t)};ormmaview.deactivate=function(e){this.executeNativeCall("service","name",e,"enabled","N")};ormmaview.removeEventListener=function(e,t){var n=listeners[e];if(n!=null){n.remove(t)}};ormmaview.close=function(){this.executeNativeCall("close")};ormmaview.expand=function(dimensions,URL){try{var cmd="this.executeNativeCall( 'expand'";if(URL!=null){cmd+=", 'url', '"+URL+"'"}if(typeof dimensions.x!="undefined"&&dimensions.x!=null){cmd+=", 'x', '"+dimensions.x+"'"}if(typeof dimensions.y!="undefined"&&dimensions.y!=null){cmd+=", 'y', '"+dimensions.y+"'"}if(typeof dimensions.width!="undefined"&&dimensions.width!=null){cmd+=", 'w', '"+dimensions.width+"'"}if(typeof dimensions.height!="undefined"&&dimensions.height!=null){cmd+=", 'h', '"+dimensions.height+"'"}if(typeof expandProperties.useBackground!="undefined"&&expandProperties.useBackground!=null){cmd+=", 'useBG', '"+(expandProperties.useBackground?"Y":"N")+"'"}if(typeof expandProperties.backgroundColor!="undefined"&&expandProperties.backgroundColor!=null){cmd+=", 'bgColor', '"+expandProperties.backgroundColor+"'"}if(typeof expandProperties.backgroundOpacity!="undefined"&&expandProperties.backgroundOpacity!=null){cmd+=", 'bgOpacity', "+expandProperties.backgroundOpacity}if(typeof expandProperties.lockOrientation!="undefined"&&expandProperties.lockOrientation!=null){cmd+=", 'lkOrientation', '"+(expandProperties.lockOrientation?"Y":"N")+"'"}cmd+=" );";eval(cmd)}catch(e){alert("executeNativeExpand: "+e+", cmd = "+cmd)}};ormmaview.hide=function(){this.executeNativeCall("hide")};ormmaview.open=function(e,t){var n=false;var r=false;var i=false;if(t==null){n=true;r=true;i=true}else{for(var s=0;s<t.length;s++){if(t[s]=="none"&&s>0){self.fireErrorEvent("none must be the only navigation element present.","open");return}else if(t[s]=="all"){if(s>0){self.fireErrorEvent("none must be the only navigation element present.","open");return}n=true;r=true;i=true}else if(t[s]=="back"){n=true}else if(t[s]=="forward"){r=true}else if(t[s]=="refresh"){i=true}}}this.executeNativeCall("open","url",e,"back",n?"Y":"N","forward",r?"Y":"N","refresh",i?"Y":"N")};ormmaview.openMap=function(e,t){this.executeNativeCall("openMap","url",e,"fullscreen",t)};ormmaview.resize=function(e,t){this.executeNativeCall("resize","w",e,"h",t)};ormmaview.getExpandProperties=function(){return expandProperties};ormmaview.setExpandProperties=function(e){expandProperties=e};ormmaview.show=function(){this.executeNativeCall("show")};ormmaview.storePicture=function(e){this.executeNativeCall("storePicture","url",e)};ormmaview.playAudio=function(URL,properties){var cmd="this.executeNativeCall( 'playAudio'";cmd+=", 'url', '"+URL+"'";if(properties!=null){if(typeof properties.autoplay!="undefined"&&properties.autoplay!=null){cmd+=", 'autoplay', 'Y'"}else{cmd+=", 'autoplay', 'N'"}if(typeof properties.controls!="undefined"&&properties.controls!=null){cmd+=", 'controls', 'Y'"}else{cmd+=", 'controls', 'N'"}if(typeof properties.loop!="undefined"&&properties.loop!=null){cmd+=", 'loop', 'Y'"}else{cmd+=", 'loop', 'N'"}if(typeof properties.position!="undefined"&&properties.position!=null){cmd+=", 'position', 'Y'"}else{cmd+=", 'position', 'N'"}if(typeof properties.startStyle!="undefined"&&properties.startStyle!=null){cmd+=", 'startStyle', '"+properties.startStyle+"'"}else{cmd+=", 'startStyle', 'normal'"}if(typeof properties.stopStyle!="undefined"&&properties.stopStyle!=null){cmd+=", 'stopStyle', '"+properties.stopStyle+"'"}else{cmd+=", 'stopStyle', 'normal'"}}cmd+=" );";eval(cmd)};ormmaview.playVideo=function(URL,properties){var cmd="this.executeNativeCall( 'playVideo'";cmd+=", 'url', '"+URL+"'";if(properties!=null){if(typeof properties.audio!="undefined"&&properties.audio!=null){cmd+=", 'audioMuted', 'Y'"}else{cmd+=", 'audioMuted', 'N'"}if(typeof properties.autoplay!="undefined"&&properties.autoplay!=null){cmd+=", 'autoplay', 'Y'"}else{cmd+=", 'autoplay', 'N'"}if(typeof properties.controls!="undefined"&&properties.controls!=null){cmd+=", 'controls', 'Y'"}else{cmd+=", 'controls', 'N'"}if(typeof properties.loop!="undefined"&&properties.loop!=null){cmd+=", 'loop', 'Y'"}else{cmd+=", 'loop', 'N'"}if(typeof properties.position!="undefined"&&properties.position!=null){cmd+=", 'position_top', '"+properties.position.top+"'";cmd+=", 'position_left', '"+properties.position.left+"'";if(typeof properties.width!="undefined"&&properties.width!=null){cmd+=", 'position_width', '"+properties.width+"'"}else{}if(typeof properties.height!="undefined"&&properties.height!=null){cmd+=", 'position_height', '"+properties.height+"'"}else{}}if(typeof properties.startStyle!="undefined"&&properties.startStyle!=null){cmd+=", 'startStyle', '"+properties.startStyle+"'"}else{cmd+=", 'startStyle', 'normal'"}if(typeof properties.stopStyle!="undefined"&&properties.stopStyle!=null){cmd+=", 'stopStyle', '"+properties.stopStyle+"'"}else{cmd+=", 'stopStyle', 'normal'"}}cmd+=" );";eval(cmd)};ormmaview.createEvent=function(e,t,n){var r=e.getFullYear();var i=e.getMonth()+1;var s=e.getDate();var o=e.getHours();var u=e.getMinutes();var a=r+this.zeroPad(i)+this.zeroPad(s)+this.zeroPad(o)+this.zeroPad(u);this.executeNativeCall("calendar","date",a,"title",t,"body",n)};ormmaview.makeCall=function(e){this.executeNativeCall("phone","number",e)};ormmaview.sendMail=function(e,t,n){this.executeNativeCall("email","to",e,"subject",t,"body",n,"html","N")};ormmaview.sendSMS=function(e,t){this.executeNativeCall("sms","to",e,"body",t)};ormmaview.setShakeProperties=function(e){alert(e)};ormmaview.addAsset=function(e,t){this.executeNativeCall("addasset","uri",url,"alias",t)};ormmaview.request=function(e,t){this.executeNativeCall("request","uri",uri,"display",t)};ormmaview.removeAsset=function(e){this.executeNativeCall("removeasset","alias",e)};ormmaview.useCustomClose=function(e){expandProperties.useCustomClose=e;this.executeNativeCall("usecustomclose","flag",e)}})();